# REST API
### REST (REpresentational State Transfer)
2000년 로이 필딩의 논문에서 처음 소개되었다.
발표 당시의 웹이 HTTP를 제대로 사용하지 못하고 있는 상황을 보고 **HTTP의 장점을 최대한 활용할 수 있는 아키텍처**로서 REST를 소개했다.
이는 HTTP 프로토콜을 의도에 맞게 디자인하도록 유도하고 있다.
REST의 기본 원칙을 성실히 지킨 서비스 디자인을 ‘*RESTful*’이라고 표현한다.
거의 모든 프로그래밍 언어를 사용하여 개발이 가능하며, 다양한 데이터 포맷을 지원할 수 있다.

- REST: HTTP 기반으로 클라이언트가 서버의 리소스에 접근하는 방식을 규정한 아키텍처
- REST API: REST를 기반으로 서비스 API를 구현한 것

<br>

## REST API 구성
REST API는 **자원, 행위, 표현**의 3가지 요소로 구성되고, REST API 만으로 HTTP 요청의 내용을 이해할 수 있다.
- 자원 (resource)

    **URI**(엔드포인트)로 표현
- 행위 (verb) : 자원에 대한 행위

   **HTTP 요청 메서드**로 표현
- 표현 (representations): 자원에 대한 행위의 구체적 내용
    
    **페이로드**로 표현

<br>

> ✓ **페이로드**
<br>전송할 데이터
<br>ex. 투두 어플리케이션에 할 일로 '딥 다이브 읽기'를 POST 요청 메서드를 사용해 등록한다면 '딥 다이브 읽기'가 페이로드가 된다.

<br>

## REST API 설계 원칙
가장 중요한 기본적인 원칙은 두 가지 
1. URI는 리소스를 표현하는 데 집중하고 
2. 행위에 대한 정의는 HTTP 요청 메서드를 통해 하는 것

이 RESTful API를 설계하는 중심 규칙이다.

### 1. URI는 리소스를 표현해야 한다.
- 리소스를 식별할 수 있는 이름은 동사보다는 **명사**를 사용
    
    따라서 이름에 get 같은 *행위에 대한 표현이 들어가서는 안 된다.*
```
* bad
GET /getTodos/1      -> 행위에 대한 정의는 GET 메서드를 통해 했으므로 URI에는 리소스만 표현해야 함.
GET /todos/show/1    -> URI에 'show'라는 행위에 대한 표현이 들어가서는 안 된다.

* good
GET /todos/1
```

### 2. 리소스에 대한 행위는 HTTP 요청 메서드로 표현한다.
- HTTP 요청 메서드는 클라이언트가 서버에게 요청의 종류와 목적(리소스에 대한 행위)를 알리는 방법
- 주로 5가지 요청 메서드(GET, POST, PUT, PATCH, DELETE)를 사용하여 CRUD를 구현함

    |URL|목적|페이로드|
    |------|---|---|
    |**GET**|모든/특정 리소스 취득|X|
    |**POST**|리소스 생성|O|
    |**PUT**|리소스 전체 교체|O|
    |**PATCH**|리소스 일부 수정|O|
    |**DELETE**|모든/특정 리소스 삭제|X|


- 리소스에 대한 행위는 URI에 표현하지 않음

    예로 리소스를 취득하는 경우에는 `GET`, 리소스를 삭제하는 경우에는 `DELETE` HTTP 요청 메서드를 사용하여 리소스에 대한 행위를 명확히 표현한다.
    ```
    * bad
    GET /todos/delete/1

    * good
    DELETE /todos/1
    ```

<br>

## REST 설계 제한사항
1. 균일한 인터페이스
- 요청이 어디에서 오는지와 무관하게, 동일한 리소스에 대한 모든 API 요청은 동일하게 보여야 한다. 
- 사용자의 이름이나 이메일 주소 등의 동일한 데이터 조각이 오직 하나의 URI(Uniform Resource Identifier)에 속함을 보장해야 한다.

2. 클라이언트-서버 디커플링
- 클라이언트와 서버 애플리케이션은 서로 간에 완전히 독립적이어야 한다.
- 클라이언트 애플리케이션이 알아야 하는 유일한 정보는 요청된 리소스의 URI이며, 이는 다른 방법으로 서버 애플리케이션과 상호작용할 수 없다.
- 서버 애플리케이션은 HTTP를 통해 요청된 데이터에 전달하는 것 말고는 클라이언트 애플리케이션을 수정하지 않아야 한다.

3. Stateless
REST API는 stateless다. 이는 각 요청에서 이의 처리에 필요한 모든 정보를 포함해야 함을 의미한다. 

4. 캐싱 가능성
- 가능하면 리소스를 클라이언트 또는 서버측에서 캐싱할 수 있어야 한다.
- 또한 서버 응답에는 전달된 리소스에 대해 캐싱이 허용되는지 여부에 대한 정보도 포함되어야 한다. 

5. 계층 구조 아키텍처
- REST API에서는 호출과 응답이 서로 다른 계층을 통과한다. 통신 루프에는 다수의 서로 다른 중개자가 있을 수 있기 때문에 클라이언트와 서버 애플리케이션이 서로 간에 직접 연결된다고 가정하지 않는 것이 좋다. 
- REST API는 엔드 애플리케이션 또는 중개자와 통신하는지 여부를 클라이언트나 서버가 알 수 없도록 설계되어야 한다.

6. 코드 온디맨드(옵션)
REST API는 일반적으로 정적 리소스를 전송하지만, 특정한 경우에는 응답에 실행 코드를 포함할 수도 있다.
이 경우에 코드는 요청 시에만 실행되어야 한다.


<br><br>

#### Reference
- 책 <모던 자바스크립트 Deep Dive>
- https://ko.wikipedia.org/wiki/%ED%8E%98%EC%9D%B4%EB%A1%9C%EB%93%9C_(%EC%BB%B4%ED%93%A8%ED%8C%85)
- https://www.ibm.com/kr-ko/topics/rest-apis
