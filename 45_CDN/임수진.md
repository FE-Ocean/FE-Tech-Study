# CDN (Content Delivery Network)
**사용자 위치, 콘텐츠 원본 서버, 에지 서버 위치를 기준으로 콘텐츠를 사용자에게 전송할 수 있는 지리적으로 분산된 서버들을 연결한 네트워크**
- 콘텐츠(HTML 페이지, JavaScript 파일, 스타일시트, 이미지 등)의 복사본을 사용자 가까이 두거나 동적 컨텐츠의 전달을 활성화하여 웹 성능 및 속도 향상
- 주 목적은 대기 시간을 줄이거나 네트워크 설계로 인해 발생하는 통신 지연을 줄이는 것
- 각 CDN 서버는 콘텐츠를 캐싱할 수 있는 캐시 기능을 갖추고 있으며 최종 사용자와 가까운 위치에서 사용자에게 콘텐츠를 제공 
- 각 CDN 서버는 CDN 제공업체에 의해 여러 지역에 구축되고 여러 ISP(인터넷 서비스 제공자) 네트워크에 걸쳐 배포

<br>

## 작동 방식
<img src="https://img.alicdn.com/tfs/TB1eV4wKa6qK1RjSZFmXXX0PFXa-1149-1328.png_.webp" width="800px">

사용자가 특정 위치에서 웹서버 데이터(웹 사이트)에 접근할 때: 
### CDN 사용하지 않는 경우 
사용자가 웹 사이트를 방문할 때, 해당 웹 사이트 서버의 데이터는 사용자의 컴퓨터에 도달하기 위해 인터넷을 통해 이동해야 한다.
사용자가 해당 서버에서 멀리 떨어져 있는 경우 가까운 경우보다 데이터를 로드하는 시간이 더 오래 걸린다.

### CDN 사용하는 경우 
1. 요청은 먼저 가까운 최적 CDN 서버로 전송된다. (물리적으로 가까운 서버로 전송되기 때문에 이동 시간 단축으로 서비스가 빨라짐)
2. 
- 요청된 데이터를 해당 CDN 서버에 이미 캐싱한 경우: 데이터가 원본 서버로 다시 전송될 필요 없이 해당 서버에서 사용자에게 제공
- 데이터가 데이터를 제공하는 CDN 서버에 캐싱되지 않은 경우: 요청이 CDN 서버로 먼저 전송된 후 원본 서버로 전송 
3. 그런 다음 CDN 서버는 데이터를 원본 서버에서 가져와 사용자의 요청을 이행한다. 
4. 또한 CDN 서버에서는 이 사용자나 해당 데이터를 요청하는 다른 사용자의 향후 요청을 이행하기 위해 해당 데이터를 캐싱한다.

따라서 CDN을 웹사이트에서 사용할 경우 특정 콘텐츠를 처음 요청하는 사용자에게만 지연이 발생하고, 이 콘텐츠를 나중에 요청하는 사용자는 모두 CDN 노드에서 콘텐츠를 제공받기 때문에 해당 콘텐츠에 더 빨리 접근할 수 있다.
물론 콘텐츠의 캐시 설정에 따라 그렇지 않을 수도 있다. 일부 설정의 경우 콘텐츠 만료 시간에 따라 CDN 노드에서 콘텐츠를 다시 가져와야 하기 때문이다.


## CDN 사용 이점
- 페이지 로드 시간 단축

    가까운 CDN 서버를 사용하여 웹사이트 방문자에 가까운 콘텐츠를 제공하므로 페이지 로드 시간이 빨라지게 된다. 
    사이트 로드가 느리면 방문자는 이탈하기 때문에 CDN은 이탈률을 줄이고 방문자가 사이트에서 보내는 시간을 늘릴 수 있다. 

- 대역폭 비용 절감

    서버가 요청에 응답할 때마다 대역폭을 사용하기 때문에 대역폭 비용이 상당히 높다. 캐싱 및 기타 최적화를 통해 CDN은 원본 서버가 제공해야 하는 데이터의 양을 줄여 웹 사이트 소유자의 호스팅 비용을 절감할 수 있다.

- 콘텐츠 가용성 제고

    한 번에 너무 많은 방문자가 방문하거나 네트워크 하드웨어 오류가 발생하면 웹 사이트가 중단될 수 있다.
    CDN 서비스는 더 많은 웹 트래픽을 처리하고 웹 서버의 로드를 줄일 수 있다. 또한 하나 이상의 CDN 서버가 오프라인으로 전환되면 다른 운영 서버가 해당 서버를 대체하여 서비스가 중단되지 않도록 할 수 있다.

- 웹 사이트 보안 강화

    분산 서비스 거부(DDoS) 공격은 대량의 가짜 트래픽을 웹 사이트로 전송하여 애플리케이션이 작동 중지되도록 만들려고 시도한다. CDN은 여러 중간 서버 간에 로드를 분산해 원본 서버에 미치는 영향을 줄임으로써 이러한 트래픽 급증을 처리할 수 있다.


<br><br>

#### Reference
- https://aws.amazon.com/ko/what-is/cdn/
- https://www.cloudflare.com/ko-kr/learning/cdn/what-is-a-cdn/
- https://www.alibabacloud.com/ko/knowledge/what-is-cdn
