# JWT (JSON Web Token)

- 인터넷 표준 인증 방식 중 하나
- 인증에 필요한 정보들을 BASE64 알고리즘을 이용하여 인코딩하여 토큰에 담는 방식
- 공개 키, 개인 키로 서명이 되어 있으므로 신뢰 가능
- 로그인 시 서버에서 토큰을 응답-> 클라이언트는 토큰을 저장해서 서버에 요청 시마다 토큰을 헤더에 포함 -> 서버는 토큰이 검증되면 요청 처리
- 담고 있는 정보가 많아지면 토큰의 길이가 길어져 요청 시 부하가 걸릴 수도 있음

## 구조

- 인코딩된 헤더, 페이로드, 서명이 `.`으로 연결되어 있는 구조
- 모든 키 값을 3글자로 축약하는 암묵적 규칙이 있음

### 헤더 (Header)

- 토큰의 타입과 서명에 사용된 알고리즘이 무엇인지 담고 있음
- 비보안 토큰의 경우 `"alg"` 값을 `"none"`으로 두기도 함

```json
{
    "typ": 토큰의 타입,
    "alg": 서명에 사용된 알고리즘
}
```

### 페이로드 (Payload)

- 사용자를 식별할 수 있는 정보(클레임, Claim)를 키-값 형식으로 담고 있음
- 사전에 정의된 등록된 클레임이 있으며, 모든 클레임을 다 담을 필요는 없고 필요한 것만 포함하면 됨
- 공개용 정보를 위한 공개 클레임을 만들 수 있음 -> 충돌 방지를 위해 URI를 사용
- 서버와 클라이언트 사이에서 필요한 정보를 커스텀하여 비공개 클레임을 만들 수 있음
- 인코딩은 되어 있지만 암호화가 된 것은 아니라서 민감한 정보는 포함해서는 안 됨

```json
{
    // 등록된 클레임 (이미 정의되어 있는 클레임)
    "sub": 토큰 제목,
    "iss": 토큰 발급자,
    "aud": 토큰 대상자,
    "nbf": 트큰이 활성되는 날짜,
    "iat": 토큰이 발급된 시간,
    "exp": 토큰이 만료될 시간,
    "jti": 토큰의 고유 식별자
}
```

### 서명 (Signature)

- 헤더와 페이로드를 헤더에 정의된 알고리즘대로 인코딩한 후 `.`으로 연결한 값을 비밀 키로 해싱

## 참고 사이트

- https://jwt.io/
- https://ko.wikipedia.org/wiki/JSON_%EC%9B%B9_%ED%86%A0%ED%81%B0
- https://cloud.google.com/iot/docs/how-tos/credentials/jwts?hl=ko
- https://guide.ncloud-docs.com/docs/globaledge-jwt
- https://velopert.com/2389
- https://www.geeksforgeeks.org/json-web-token-jwt/
