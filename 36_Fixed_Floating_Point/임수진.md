컴퓨터에서는 모든 정보를 2진수로 처리하는데, 정수에 비해 실수를 표현하는 방법은 훨씬 복잡하다.
고정 소수점으로 표현하는 방식과 부동 소수점으로 표현하는 방식이 있다.

# 고정 소수점 (Fixed Point)
2진수로 변환한 결과 그대로 소수점 위치를 고정시킨 표현 방식

<img src="https://tcpschool.com/lectures/img_c_fixed_point.png">

- 맨 앞은 부호 비트로 양수/음수를 구분 (0: 양수, 1: 음수)
- 32비트 기준으로 15비트는 정수, 나머지 16비트는 소수 부분에 사용
- 구현하기 편리하지만 사용하는 비트 수 대비 표현 가능한 수의 범위 또는 정밀도가 낮기 때문에 실수를 다룰 필요가 있는 범용 시스템에서는 거의 안 쓰임
- 높은 정밀도가 필요없는 소규모 시스템에서는 간혹 쓰임

<br>

# 부동 소수점 (Floating Point)
하나의 수를 고정 소수점 부분을 나타내는 부분(가수)과 고정 소수점 위치를 나타내는 부분(지수)으로 나누어 표현하는 표기법

- 부동소수점 표현 방식에서는 2진수로 변환한 결과를 그대로 넣지 않고 몇 가지 과정을 추가로 거침 (정규화, ...)
- 정규화

    => 이진수를 `1.xxx... * 2^n`의 형태로 변환
- 고정 소수점 방식보다 넓은 영역의 숫자를 나타낼 수 있어 대부분의 시스템에서 사용

## IEEE 754 표준
현재 사용되고 있는 부동 소수점 방식은 대부분 IEEE 754 표준을 따른다.

<img src="https://tcpschool.com/lectures/img_c_floating_point_32.png">

IEEE 표준에 따르면 부동소수점 방식으로 실수를 저장하는 데는 32비트, 또는 64비트가 사용되며 32비트 기준으로 위 그림과 같은 구조를 가진다.
- 부호 비트: 고정소수점에서와 마찬가지로 0이면 양수, 1이면 음수를 의미
- 지수부

    - 2^n에서 n에 해당하는 수를 2진수로 바꾸고 그대로 넣는 게 아니라, 'bias' 라고 하는 지정된 숫자를 더한 다음 넣어야 함
    - IEEE 표준에서 32비트를 쓰는 경우 bias: 127
    - 따라서 n + 127을 2진수로 바꾼 수가 들어감
    > bias라는 값 쓰는 이유: 지수가 음수가 될 수도 있기 때문
- 가수부: 23자리로 정규화 결과 소수점 오른쪽에 있는 숫자들을 왼쪽부터 그대로 삽입. 남는 자리는 0으로 채움

### 64비트의 double형 실수를 IEEE 부동 소수점 방식으로 표현
<img src="https://tcpschool.com/lectures/img_c_floating_point_64.png">

- 프로그래밍 언어의 double 타입이 해당 (32비트 체계는 float 타입)
- 64비트 체계에서는 지수부가 11비트, 가수부가 52비트
- 지수부가 2^11, 즉 2048개의 수를 표현할 수 있으므로 0~1023 구간은 음수, 1024~2047 구간은 양수 지수를 의미
- bias는 1023

## 부동 소수점 방식의 오차
부동 소수점 방식을 사용하면 고정 소수점 방식보다 훨씬 더 많은 범위까지 표현할 수 있지만,
부동 소수점 방식에 의한 실수의 표현은 항상 오차가 존재한다는 단점이 있다.
```
0.1 + 0.2 = 0.30000000000000004
```
위의 예제에서 합계는 원래 0.3이 되어야 하지만, 0.30000000000000004가 출력된다.

0.125를 2진법으로 변환하면 0.001로 딱 떨어지지만, 0.1 같은 경우는 깔끔히 떨어지지 않고 무한히 0011의 패턴이 반복된다.(0.00011001100110011001100110011...)
소수부를 저장하는 비트수는 제한되어 있기 때문에 가능한 자릿수까지만 담고 끊어버린다.
그래서 잘린 부분들만큼의 오차가 발생하게 된다.
그래서 32비트보다는 64비트의 자료형을 사용하면 오차가 적어진다.

따라서 컴퓨터에서 실수를 표현하는 방법은 정확한 표현이 아닌 언제나 근사치를 표현할 뿐임을 항상 명심해야 한다.


<br><br>

#### Reference
- https://tcpschool.com/cpp/cpp_datatype_floatingPointNumber
- https://gsmesie692.tistory.com/94
- http://word.tta.or.kr/dictionary/dictionaryView.do?word_seq=043763-2
- https://www.youtube.com/watch?v=-GsrYvZoAdA
